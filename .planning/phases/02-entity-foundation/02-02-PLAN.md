---
phase: 02-entity-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/schema/person.ts
  - app/[locale]/about/page.tsx
autonomous: true

must_haves:
  truths:
    - "Person schema appears in HTML source of About page"
    - "Schema has correct inLanguage value matching page locale"
    - "Schema includes jobTitle, knowsAbout, and sameAs for E-E-A-T signals"
    - "Person schema references Organization via worksFor @id"
  artifacts:
    - path: "lib/schema/person.ts"
      provides: "Person schema generator with bilingual support and expertise data"
      exports: ["generatePersonSchema"]
    - path: "app/[locale]/about/page.tsx"
      provides: "About page with Person schema injection"
  key_links:
    - from: "app/[locale]/about/page.tsx"
      to: "lib/schema/person.ts"
      via: "import generatePersonSchema"
      pattern: "import.*generatePersonSchema.*from.*lib/schema/person"
    - from: "app/[locale]/about/page.tsx"
      to: "components/json-ld.tsx"
      via: "JsonLd component usage"
      pattern: "<JsonLd.*data=.*personSchema"
    - from: "lib/schema/person.ts"
      to: "lib/schema/types.ts"
      via: "shared constants import"
      pattern: "import.*PERSON_ID.*from.*types"
---

<objective>
Implement Person schema on the About page for author expertise and E-E-A-T signals.

Purpose: Establish author identity and expertise credentials for AI knowledge graphs, enabling AI search engines to recognize the author as an expert in AI automation and marketing systems.
Output: Person JSON-LD on About page with expertise areas, credentials, and social profile links.
</objective>

<execution_context>
@/Users/kazuya/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kazuya/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-entity-foundation/02-RESEARCH.md

# Relevant source files
@app/[locale]/about/page.tsx
@lib/schema/types.ts (created by 02-01)
@components/json-ld.tsx (created by 02-01)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement Person schema generator</name>
  <files>
    lib/schema/person.ts
  </files>
  <action>
Create `lib/schema/person.ts` following the research pattern:

1. Import types from schema-dts: `Person`, `WithContext`
2. Import constants from `./types`: BASE_URL, ORGANIZATION_ID, PERSON_ID

3. Define locale-specific PersonData with:

   **English (en):**
   - name: 'Kazuya Hibara'
   - jobTitle: 'AI Marketing Engineer'
   - description: 'AI Marketing Engineer specializing in automation and marketing systems for solopreneurs and small businesses'
   - knowsAbout: ['AI Automation', 'Marketing Systems', 'n8n Workflows', 'Next.js Development', 'LLM Integration', 'Business Process Automation']
   - sameAs: LinkedIn, GitHub URLs (use placeholder or actual if known)

   **Japanese (ja):**
   - name: 'Kazuya Hibara'
   - alternateName: '日原和也'
   - jobTitle: 'AIマーケティングエンジニア'
   - description: '個人事業主やスモールビジネス向けのAI自動化とマーケティングシステムを専門とするエンジニア'
   - knowsAbout: ['AI自動化', 'マーケティングシステム', 'n8nワークフロー', 'Next.js開発', 'LLM統合', 'ビジネスプロセス自動化']
   - sameAs: same URLs

4. Export `generatePersonSchema(locale: 'en' | 'ja')` returning `WithContext<Person>`:
   - '@context': 'https://schema.org'
   - '@type': 'Person'
   - '@id': PERSON_ID
   - name, alternateName (if ja)
   - url: `${BASE_URL}/${locale}/about`
   - image: `${BASE_URL}/opengraph.png` (fallback since profile.jpg doesn't exist)
   - jobTitle, description, knowsAbout: locale-specific
   - sameAs: array of profile URLs
   - worksFor: { '@id': ORGANIZATION_ID } (reference to Organization schema)
   - inLanguage: locale

Note: The `worksFor` @id reference connects Person to Organization schema from Plan 02-01.
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - File exports generatePersonSchema function
    - Function returns valid Person schema for both 'en' and 'ja'
    - Schema includes knowsAbout array with expertise areas
  </verify>
  <done>
    Person schema generator exists with bilingual E-E-A-T content (expertise, credentials, social links).
  </done>
</task>

<task type="auto">
  <name>Task 2: Convert About page to Server Component and inject Person schema</name>
  <files>
    app/[locale]/about/page.tsx
  </files>
  <action>
The About page is currently a Client Component ('use client'). To inject JSON-LD at build time, we need to restructure it.

**Strategy:** Keep the main content as a Client Component for router.push functionality, but wrap it in a Server Component that handles schema injection.

1. Rename the existing component to `AboutContent` and keep it as client component in the same file (or extract to a separate file like `about-content.tsx` if cleaner).

2. Create a new default export Server Component that:
   - Imports `generatePersonSchema` from `@/lib/schema/person`
   - Imports `JsonLd` from `@/components/json-ld`
   - Generates personSchema based on locale
   - Returns the JsonLd component plus the AboutContent client component

**Implementation approach:**

```tsx
// At top of file - remove 'use client' from module level
import { generatePersonSchema } from '@/lib/schema/person'
import { JsonLd } from '@/components/json-ld'

// Keep existing AboutContent as a client component
'use client' // Move this to a separate AboutContent component

// Server Component wrapper
export default async function AboutPage({ params }: { params: Promise<{ locale: 'en' | 'ja' }> }) {
  const { locale } = await params
  const personSchema = generatePersonSchema(locale)

  return (
    <>
      <JsonLd data={personSchema} />
      <AboutContent locale={locale} />
    </>
  )
}
```

**Alternative (simpler):** Extract client content to `components/about-content.tsx` and keep page.tsx as pure server component.

The key is:
- JsonLd must be server-rendered for SEO
- Interactive parts (router.push) remain client-side
- Both get locale prop
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run build` completes without errors
    - Start dev server, visit http://localhost:3000/en/about
    - View Page Source, verify Person JSON-LD appears with `"@type": "Person"`
    - Verify page still functions (navigation, CTA buttons work)
    - Visit http://localhost:3000/ja/about, verify `"inLanguage": "ja"`
  </verify>
  <done>
    About page renders Person schema in HTML source while maintaining all existing functionality.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify entity graph connections</name>
  <files>None (verification only)</files>
  <action>
Verify that Organization and Person schemas are properly connected via @id references:

1. Start dev server: `npm run dev`

2. Visit http://localhost:3000/en/about and view page source

3. Find BOTH JSON-LD blocks:
   - Organization schema (from layout): should have `"founder": { "@id": "https://kazuya.work/#person" }`
   - Person schema (from about page): should have `"worksFor": { "@id": "https://kazuya.work/#organization" }`

4. Verify @id consistency:
   - Organization @id: `https://kazuya.work/#organization`
   - Person @id: `https://kazuya.work/#person`
   - Cross-references match these exact URLs

5. Check both locales (en and ja) have the same @id URLs (only content differs, not IDs)

This creates a connected entity graph where AI can understand:
- Kazuya Hibara (Person) is the founder of Kazuya Hibara (Organization)
- The Organization is where the Person works

Note: If URLs don't match exactly, fix in types.ts to ensure consistency.
  </action>
  <verify>
    - Organization schema contains `founder: { @id: ".../#person" }`
    - Person schema contains `worksFor: { @id: ".../#organization" }`
    - @id values are identical across both locales
    - Both schemas appear on About page (Organization from layout, Person from page)
  </verify>
  <done>
    Organization and Person schemas form a connected entity graph with bidirectional @id references.
  </done>
</task>

</tasks>

<verification>
## Phase Verification

Run these checks to confirm Person schema is properly implemented:

1. **TypeScript compilation:**
   ```bash
   npx tsc --noEmit
   ```
   Should pass with no errors.

2. **About page inspection (English):**
   - Visit http://localhost:3000/en/about
   - View Page Source
   - Verify TWO JSON-LD blocks: Organization (from layout) + Person (from page)
   - Person schema should include:
     - `"@type": "Person"`
     - `"jobTitle": "AI Marketing Engineer"`
     - `"knowsAbout"` array with expertise areas
     - `"worksFor": { "@id": ".../#organization" }`
     - `"inLanguage": "en"`

3. **About page inspection (Japanese):**
   - Visit http://localhost:3000/ja/about
   - Verify Person schema has:
     - `"alternateName": "日原和也"`
     - `"jobTitle": "AIマーケティングエンジニア"`
     - Japanese knowsAbout values
     - `"inLanguage": "ja"`

4. **Functional testing:**
   - Verify "Get in Touch" / "お問い合わせ" button navigates to contact page
   - Verify all existing page content displays correctly

5. **Rich Results Test (optional but recommended):**
   - If deployed, test https://search.google.com/test/rich-results
   - Should detect Person structured data
</verification>

<success_criteria>
1. Person schema appears in HTML source of About page
2. Schema has `@type: "Person"` with E-E-A-T fields (jobTitle, knowsAbout, sameAs)
3. `inLanguage` property matches page locale (en/ja)
4. Schema includes `worksFor` reference to Organization `#organization`
5. Page functionality preserved (navigation, buttons work)
6. No TypeScript errors, build passes
</success_criteria>

<output>
After completion, create `.planning/phases/02-entity-foundation/02-02-SUMMARY.md`
</output>
