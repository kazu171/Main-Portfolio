---
phase: 03-content-structure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - lib/content/types.ts
  - components/ui/last-updated.tsx
autonomous: true

must_haves:
  truths:
    - "WorkflowArticle type includes datePublished and dateModified fields"
    - "WorkflowArticle type includes directAnswerEn and directAnswerJa fields"
    - "CaseStudyArticle type includes datePublished and dateModified fields"
    - "CaseStudyArticle type includes directAnswerEn and directAnswerJa fields"
    - "LastUpdated component renders bilingual date display"
  artifacts:
    - path: "lib/content/types.ts"
      provides: "Extended article types with date and direct answer fields"
      contains: "datePublished: string"
    - path: "components/ui/last-updated.tsx"
      provides: "Reusable date display component"
      exports: ["LastUpdated"]
  key_links:
    - from: "components/ui/last-updated.tsx"
      to: "next-intl useFormatter"
      via: "import and hook call"
      pattern: "useFormatter"
---

<objective>
Extend content type definitions with date and direct answer fields, and create a reusable LastUpdated component for displaying article freshness.

Purpose: Enables STRUCT-01 (direct answers) and STRUCT-04 (dateModified display) by providing the data structure and UI component that article pages will use.

Output: Updated types.ts with new fields, LastUpdated component ready for integration.
</objective>

<execution_context>
@/Users/kazuya/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kazuya/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-content-structure/03-RESEARCH.md
@lib/content/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend content type definitions</name>
  <files>lib/content/types.ts</files>
  <action>
Add the following fields to WorkflowArticle interface (after heroImage, before sections):

```typescript
// Direct answer for AI extraction (40-60 words, standalone)
directAnswerEn: string;
directAnswerJa: string;
// Publication dates for freshness signals
datePublished: string;  // ISO 8601: "2026-01-15"
dateModified: string;   // ISO 8601: "2026-02-12"
```

Add the same four fields to CaseStudyArticle interface (after heroImage, before persona):

```typescript
// Direct answer for AI extraction (40-60 words, standalone)
directAnswerEn: string;
directAnswerJa: string;
// Publication dates for freshness signals
datePublished: string;  // ISO 8601: "2026-01-15"
dateModified: string;   // ISO 8601: "2026-02-12"
```

Preserve all existing fields and type exports. Do NOT modify isWorkflow or isCaseStudy functions.
  </action>
  <verify>Run `npx tsc --noEmit` to check type definitions compile without errors. Note: workflow and case-study data files will show errors until Plan 03-02 and 03-03 add the data.</verify>
  <done>Both WorkflowArticle and CaseStudyArticle interfaces include directAnswerEn, directAnswerJa, datePublished, and dateModified fields.</done>
</task>

<task type="auto">
  <name>Task 2: Create LastUpdated component</name>
  <files>components/ui/last-updated.tsx</files>
  <action>
Create a new client component at components/ui/last-updated.tsx:

```tsx
'use client';

import { useFormatter } from 'next-intl';

interface LastUpdatedProps {
  date: string; // ISO 8601 format: "2026-02-12"
  locale: 'en' | 'ja';
  className?: string;
}

export function LastUpdated({ date, locale, className = '' }: LastUpdatedProps) {
  const format = useFormatter();
  const dateObj = new Date(date);

  const label = locale === 'en' ? 'Last updated' : '最終更新';
  const formattedDate = format.dateTime(dateObj, {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });

  return (
    <time
      dateTime={date}
      className={`text-sm text-muted-foreground font-medium ${className}`}
    >
      {label}: {formattedDate}
    </time>
  );
}
```

Key implementation notes:
- Use 'use client' directive (useFormatter is a client hook)
- Accept className prop for styling flexibility
- Use semantic `<time>` element with machine-readable dateTime attribute
- Format date using next-intl's useFormatter for consistent locale handling
  </action>
  <verify>Verify file exists with `cat components/ui/last-updated.tsx`. Verify import works by checking `npx tsc --noEmit` (ignore workflow/case-study data errors).</verify>
  <done>LastUpdated component exists at components/ui/last-updated.tsx, exports LastUpdated function, uses next-intl useFormatter for bilingual date display.</done>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` - types.ts should compile (data file errors expected)
2. Check types.ts includes all 4 new fields in both interfaces
3. Check last-updated.tsx exists and exports LastUpdated component
4. Verify LastUpdated uses useFormatter from next-intl
</verification>

<success_criteria>
- WorkflowArticle and CaseStudyArticle types extended with date and direct answer fields
- LastUpdated component created with bilingual support
- No TypeScript errors in new/modified files (data file errors expected until 03-02/03-03)
</success_criteria>

<output>
After completion, create `.planning/phases/03-content-structure/03-01-SUMMARY.md`
</output>
